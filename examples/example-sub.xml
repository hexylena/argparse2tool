<root>
<macros>
  <token name="EXAMPLE_SUB_QUX_INMACRO"><![CDATA[--qux '$qux']]></token>
  <token name="EXAMPLE_SUB_QUX_OUTMACRO"><![CDATA[]]></token>
  <xml name="example_sub_qux_inmacro">
    <param optional="true" label="qux help" type="text" name="qux" argument="--qux"/>
  </xml>
  <xml name="example_sub_qux_outmacro"/>
</macros>

<macros>
  <token name="EXAMPLE_SUB_BAZ_INMACRO"><![CDATA[--baz '$baz'
@EXAMPLE_SUB_QUX_INMACRO@]]></token>
  <token name="EXAMPLE_SUB_BAZ_OUTMACRO"><![CDATA[@EXAMPLE_SUB_QUX_OUTMACRO@]]></token>
  <xml name="example_sub_baz_inmacro">
    <param optional="true" label="baz help" type="text" name="baz" argument="--baz"/>
    <expand macro="example_sub_qux_inmacro"/>
  </xml>
  <xml name="example_sub_baz_outmacro">
    <expand macro="example_sub_qux_outmacro"/>
  </xml>
</macros>

<tool name="example_sub_foo" id="example_sub_foo" version="1.0">
  <description/>
  <macros>
    <import>example_sub_baz.xml</import>
    <import>example_sub_qux.xml</import>
    <import>examples/macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <version_command><![CDATA[python example-sub.py foo --version]]></version_command>
  <command><![CDATA[python example-sub.py foo $keyword

#set repeat_var_2 = '" "'.join([ str($var.integers) for $var in $repeat_2 ])
"$repeat_var_2"

$sum

#if $foo and $foo is not None:
--foo '$foo'
#end if

#set repeat_var_4 = '" "'.join([ str($var.bar) for $var in $repeat_4 ])
--bar "$repeat_var_4"

$true
@EXAMPLE_SUB_BAZ_INMACRO@
@EXAMPLE_SUB_QUX_INMACRO@
@EXAMPLE_SUB_BAZ_OUTMACRO@
@EXAMPLE_SUB_QUX_OUTMACRO@
> $default]]></command>
  <inputs>
    <param label="action keyword" type="text" name="keyword"/>
    <repeat title="repeat_title" min="1" name="repeat_2">
      <param label="an integer for the accumulator" value="0" type="integer" name="integers"/>
    </repeat>
    <param label="sum the integers (default: find the max)" checked="false" type="boolean" name="sum" argument="--sum" truevalue="--sum" falsevalue=""/>
    <param optional="true" label="foo help" type="text" name="foo" argument="--foo"/>
    <repeat title="repeat_title" name="repeat_4">
      <param optional="true" label="BAR!" value="1" type="text" name="bar" argument="--bar"/>
    </repeat>
    <param label="Store a true" checked="false" type="boolean" name="true" argument="--true" truevalue="--true" falsevalue=""/>
    <expand macro="example_sub_baz_inmacro"/>
    <expand macro="example_sub_qux_inmacro"/>
  </inputs>
  <outputs>
    <expand macro="example_sub_baz_outmacro"/>
    <expand macro="example_sub_qux_outmacro"/>
    <data name="default" format="txt" hidden="false"/>
  </outputs>
  <expand macro="example_sub_foo_tests"/>
  <help><![CDATA[TODO: Write help]]></help>
  <expand macro="citations"/>
</tool>

<tool name="example_sub_bar" id="example_sub_bar" version="2.0">
  <description/>
  <macros>
    <import>example_sub_qux.xml</import>
    <import>examples/macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <version_command><![CDATA[python example-sub.py bar --version]]></version_command>
  <command><![CDATA[python example-sub.py bar $false
#for $i in $repeat_1:
--append $i.append
#end for
#for $i in $repeat_2:
--nargs2 "$repeat_var_2"
#end for

#if $mode and $mode is not None:
--mode $mode
#end if
@EXAMPLE_SUB_QUX_INMACRO@
@EXAMPLE_SUB_QUX_OUTMACRO@
> $default]]></command>
  <inputs>
    <param label="Store a false" checked="false" type="boolean" name="false" argument="--false" truevalue="--false" falsevalue=""/>
    <repeat title="Repeated Variable" name="repeat_1">
      <param label="Append a value" type="text" name="append" argument="--append"/>
    </repeat>
    <repeat title="repeat_title" min="2" max="2" name="repeat_2">
      <param optional="true" label="nargs2" type="text" name="nargs2" argument="--nargs2"/>
    </repeat>
    <param optional="true" label="Author did not provide help for this parameter... " type="select" name="mode" argument="--mode">
      <option value="paper">paper</option>
      <option value="rock">rock</option>
      <option selected="true" value="scissors">scissors</option>
    </param>
    <expand macro="example_sub_qux_inmacro"/>
  </inputs>
  <outputs>
    <expand macro="example_sub_qux_outmacro"/>
    <data name="default" format="txt" hidden="false"/>
  </outputs>
  <expand macro="example_sub_bar_tests"/>
  <help><![CDATA[TODO: Write help]]></help>
  <expand macro="citations"/>
</tool>

</root>
